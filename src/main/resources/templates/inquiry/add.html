<!DOCTYPE html>
<html th:replace="~{layout/layoutFile :: layout (~{::title}, ~{::links}, ~{::section})}"
      xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
   <meta name="description" content="WYSIWYG is a text editor for editing content, whether in text or graphics.">
   <title>Inquiry Add</title>
   <links>
      <!-- Quill [ OPTIONAL ] -->
      <link th:href="@{/vendors/quill/quill.css}" rel="stylesheet">
      <script th:src="@{/vendors/quill/quill.min.js}"></script>
      <!-- Initialize [ SAMPLE ] -->
      <script th:src="@{/pages/text-editor.js}"></script>
   </links>
</head>
<style>
   .ql-container {
      height: 300px;
   }
</style>
<script>
   // Quill 에디터 초기화
   var quill = new Quill('#editor-container', {
      theme: 'snow',
      modules: {
         toolbar: [
            [{ 'header': [1, 2, false] }],
            ['bold', 'italic', 'underline'],
            ['image', 'code-block']
         ]
      }
   });

   // 폼 서브밋 시 Quill 에디터의 내용을 textarea로 복사
   document.querySelector('form').onsubmit = function() {
      var content = document.querySelector('textarea[name=content]');
      content.value = quill.root.innerHTML;
   };
</script>
<body class="out-quart">
<section id="content" class="content">
   <div class="content__boxed">
      <div class="content__wrap">
         <div class="card">
            <div class="card-header">
               <h3 class="h4 card-title">문의 작성</h3>
               <hr>
               <div class="card mb-3">
                  <div class="card-body pb-0">
                     <form method="post" th:action="@{/inquiry/add}" enctype="multipart/form-data" name="inquiryform">
                        <div class="row mb-3">
                           <label for="member_id" class="col-sm-2 col-form-label">작성자</label>
                           <div class="col-sm-10">
                              <input type="text" class="form-control" id="member_id" name="member_id"
                                     th:value="${id}" readonly>
                           </div>
                        </div>

                        <div class="row mb-3">
                           <label for="inquiry_type" class="col-sm-2 col-form-label">문의유형</label>
                           <div class="col-sm-10">
                              <select class="form-control" id="inquiry_type" name="typeId">
                                 <option value="1" selected>문의 유형을 선택해주세요.</option>
                                 <option value="2">반품 문의</option>
                                 <option value="3">배송 문의</option>
                                 <option value="4">결제 문의</option>
                                 <option value="5">기타 문의</option>
                              </select>
                           </div>
                        </div>

                        <div class="row mb-3">
                           <label for="isPublic" class="col-sm-2 col-form-label">공개 여부</label>
                           <div class="col-sm-10">
                              <input type="radio" id="isPublic" name="isPublic" value="true">
                              <label for="isPublic">공개 &nbsp;</label>
                              <input type="radio" id="isPrivate" name="isPublic" value="false">
                              <label for="isPrivate">비공개</label>
                           </div>
                        </div>

                        <div class="row mb-3">
                           <label for="title" class="col-sm-2 col-form-label">제목</label>
                           <div class="col-sm-10">
                              <input type="text" class="form-control" id="title" name="title" placeholder="제목을 입력하세요">
                           </div>
                        </div>

                        <div class="row mb-3">
                           <label for="content" class="col-sm-2 col-form-label">내용</label>
                           <div class="col-sm-10">
                              <div id="_dm-quillCustomToolbar"  class="ql-mh" style="height: 300px;"></div>
                              <textarea name="content" style="display:none;"></textarea>
                           </div>
                        </div>


                        <br>
                        <div class="row mb-3">
                           <label class="col-sm-2 col-form-label">사진첨부 0/3</label>
                           <div class="col-sm-10">
                              <p>빠른 답변을 위해 사진을 첨부해주세요.</p>
                              <label class="file-upload-wrapper" for="files">
                                 <input type="file" id="files" name="files" multiple accept=".jpg, .jpeg, .png, .gif"
                                        hidden onchange="updateFileName()">
                                 <img th:src="@{/img/inquiry/imageAdd.png}" alt="Upload Image" style="width:50px;display: block">
                              </label>
                              <span id="fileList"></span>
                              <br><br>*JPG, PNG, GIF 파일만 최대 3장 업로드 가능합니다.
                           </div>
                        </div>

                        <hr>
                        <br>
                        <h5 style="font-weight:bold">문의에 대한 답변 등록 시 알려드립니다.</h5><br>

                        <div class="row mb-3">
                           <label for="inputEmail3" class="col-sm-2 col-form-label">이메일</label>
                           <div class="col-sm-10">
                              <input type="email" class="form-control" id="inputEmail3" name="email"
                                     style="display:inline-block;width:400px;">
                           </div>
                        </div>

                        <div class="text-center">
                           <button type="submit" class="btn btn-primary">Add</button>
                           <button type="reset" class="btn btn-danger">Cancel</button>
                        </div>

                     </form>
                     <hr>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
   <footer class="mt-auto">
      <div class="content__boxed">
         <div class="content__wrap py-3 py-md-1 d-flex flex-column flex-md-row align-items-md-center">
            <div class="text-nowrap mb-4 mb-md-0">Copyright &copy; 2024 <a href="#" class="ms-1 btn-link fw-bold">My Company</a></div>
            <nav class="nav flex-column gap-1 flex-md-row gap-md-3 ms-md-auto">
               <a class="nav-link link-offset-3 link-underline-hover px-0" href="#">Policy Privacy</a>
               <a class="nav-link link-offset-3 link-underline-hover px-0" href="#">Terms and conditions</a>
               <a class="nav-link link-offset-3 link-underline-hover px-0" href="#">Contact Us</a>
            </nav>
         </div>
      </div>
   </footer>
</section>

<script>
   function updateFileName() {
      const input = document.getElementById('files');
      const fileList = document.getElementById('fileList');
      const files = input.files;
      let fileNames = '';

      for (let i = 0; i < files.length; i++) {
         fileNames += files[i].name + (i < files.length - 1 ? ', ' : '');
      }

      fileList.textContent = fileNames;
   }
</script>
</body>
</html>
