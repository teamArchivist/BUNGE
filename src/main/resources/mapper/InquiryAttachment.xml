<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bunge.inquiry.mapper.InquiryAttachmentMapper">

    <!-- 첨부 파일 삽입 -->
    <insert id="insertAttachment">
        INSERT INTO inquiry_attachment (inquiry_id, file_path)
        VALUES (#{inquiryId}, #{filePath})
    </insert>

    <!-- 첨부 파일 조회 -->
    <select id="selectAttachmentsByInquiryId" resultType="InquiryAttachment">
        SELECT
            attach_id AS attachId,
            inquiry_id AS inquiryId,
            file_path AS filePath,
            created_at AS createdAt
        FROM inquiry_attachment
        WHERE inquiry_id = #{inquiryId}
    </select>

    <!-- 첨부 파일 삭제 -->
    <delete id="deleteAttachmentsByInquiryId">
        DELETE FROM inquiry_attachment WHERE inquiry_id = #{inquiryId}
    </delete>

</mapper>
